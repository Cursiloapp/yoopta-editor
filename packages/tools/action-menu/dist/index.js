import{jsx as e,jsxs as t}from"react/jsx-runtime";import*as n from"react";import{isValidElement as r,cloneElement as o,useLayoutEffect as i,useEffect as s,useRef as a,useState as c}from"react";import*as l from"react-dom";import{getRootBlockElement as u,useYooptaEditor as f,findPluginBlockByPath as d,UI as p,Blocks as h,HOTKEYS as g}from"@yoopta/editor";var v;function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var y;function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}var w;function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}var _;function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}var k;function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}var P;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}var S,R,C;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}var L,M;function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}var N;function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}var F;function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}var q;function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z.apply(this,arguments)}var V;function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}var I,H,Z;function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}var $,J;function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}var U,Y;function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}var Q;function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee.apply(this,arguments)}const te={Paragraph:function(e){return n.createElement("svg",m({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"text_svg__lucide text_svg__lucide-a-large-small"},e),v||(v=n.createElement("path",{d:"M21 14h-5M16 16v-3.5a2.5 2.5 0 0 1 5 0V16M4.5 13h6M3 16l4.5-9 4.5 9"})))},HeadingOne:function(e){return n.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"heading-one_svg__lucide heading-one_svg__lucide-heading-1"},e),y||(y=n.createElement("path",{d:"M4 12h8M4 18V6M12 18V6M17 12l3-2v8"})))},HeadingTwo:function(e){return n.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"heading-two_svg__lucide heading-two_svg__lucide-heading-2"},e),w||(w=n.createElement("path",{d:"M4 12h8M4 18V6M12 18V6M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"})))},HeadingThree:function(e){return n.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"heading-three_svg__lucide heading-three_svg__lucide-heading-3"},e),_||(_=n.createElement("path",{d:"M4 12h8M4 18V6M12 18V6M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"})))},Code:function(e){return n.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"code_svg__lucide code_svg__lucide-braces"},e),k||(k=n.createElement("path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1"})))},Embed:function(e){return n.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"embed_svg__lucide embed_svg__lucide-code"},e),P||(P=n.createElement("path",{d:"m16 18 6-6-6-6M8 6l-6 6 6 6"})))},Image:function(e){return n.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"image_svg__lucide image_svg__lucide-image"},e),S||(S=n.createElement("rect",{width:18,height:18,x:3,y:3,rx:2,ry:2})),R||(R=n.createElement("circle",{cx:9,cy:9,r:2})),C||(C=n.createElement("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})))},Video:function(e){return n.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"video_svg__lucide video_svg__lucide-square-play"},e),L||(L=n.createElement("rect",{width:18,height:18,x:3,y:3,rx:2})),M||(M=n.createElement("path",{d:"m9 8 6 4-6 4Z"})))},Blockquote:function(e){return n.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"blockquote_svg__lucide blockquote_svg__lucide-quote"},e),N||(N=n.createElement("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1zM15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"})))},TodoList:function(e){return n.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"todo-list_svg__lucide todo-list_svg__lucide-list-checks"},e),F||(F=n.createElement("path",{d:"m3 17 2 2 4-4M3 7l2 2 4-4M13 6h8M13 12h8M13 18h8"})))},BulletedList:function(e){return n.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"bulleted-list_svg__lucide bulleted-list_svg__lucide-list"},e),q||(q=n.createElement("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"})))},NumberedList:function(e){return n.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"numbered-list_svg__lucide numbered-list_svg__lucide-list-ordered"},e),V||(V=n.createElement("path",{d:"M10 6h11M10 12h11M10 18h11M4 6h1v4M4 10h2M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})))},Table:function(e){return n.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"table_svg__lucide table_svg__lucide-table"},e),I||(I=n.createElement("path",{d:"M12 3v18"})),H||(H=n.createElement("rect",{width:18,height:18,x:3,y:3,rx:2})),Z||(Z=n.createElement("path",{d:"M3 9h18M3 15h18"})))},Callout:function(e){return n.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"callout_svg__lucide callout_svg__lucide-highlighter"},e),$||($=n.createElement("path",{d:"m9 11-6 6v3h9l3-3"})),J||(J=n.createElement("path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"})))},File:function(e){return n.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round",className:"file_svg__lucide file_svg__lucide-file"},e),U||(U=n.createElement("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"})),Y||(Y=n.createElement("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})))},Divider:function(e){return n.createElement("svg",ee({width:15,height:15,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Q||(Q=n.createElement("path",{d:"M2 7.5a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10a.5.5 0 0 1-.5-.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})))}},ne=({actions:n,editor:i,empty:s,getItemProps:a,getRootProps:c,view:l="default"})=>{const u="small"===l,f={maxWidth:u?"200px":"270px"},d={minWidth:u?"28px":"40px",width:u?"28px":"40px",height:u?"28px":"40px"},p={transform:u?"scale(0.75)":"scale(1)"},h=t=>t?"string"==typeof t?e("img",{src:t,alt:"icon",style:p}):r(t)?o(t,{style:p}):e(t,{style:p}):null;return e("div",Object.assign({style:f,role:"listbox",className:"yoopta-action-menu-list-content"},{children:e("div",Object.assign({className:"max-h-[300px] overflow-y-auto overflow-x-hidden"},{children:t("div",Object.assign({},c(),{className:"overflow-hidden p-0 text-foreground"},{children:[s&&e("div",Object.assign({className:"text-left text-muted-foreground text-xs px-1 py-1"},{children:"No actions available"})),n.map(((n,r)=>{var o,s,c,l;const f=i.blocks[n.type];if(!f)return null;const p=(null===(s=null===(o=f.options)||void 0===o?void 0:o.display)||void 0===s?void 0:s.title)||f.type,g=(null===(l=null===(c=f.options)||void 0===c?void 0:c.display)||void 0===l?void 0:l.description)||"",v=n.icon||te[n.type];return t("button",Object.assign({type:"button"},a(n.type),{className:"yoopta-button flex w-full cursor-pointer items-center space-x-2 rounded-md px-1 py-1 mb-0.5 last:mb-0 text-left text-sm hover:bg-[#f4f4f5] aria-selected:bg-[#f0f0f0]"},{children:[e("div",Object.assign({style:d,className:"flex h-[40px] w-[40px] items-center justify-center rounded-md border border-solid border-[#e5e7eb] bg-[#FFFFFF]"},{children:h(v)})),t("div",{children:[e("div",Object.assign({className:"font-medium"},{children:p})),!u&&e("div",Object.assign({className:"text-xs text-muted-foreground truncate text-ellipsis max-w-[200px]"},{children:g}))]})]}),n.type)}))]}))}))}))};function re(e){return se(e)?(e.nodeName||"").toLowerCase():"#document"}function oe(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ie(e){var t;return null==(t=(se(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function se(e){return e instanceof Node||e instanceof oe(e).Node}function ae(e){return e instanceof Element||e instanceof oe(e).Element}function ce(e){return e instanceof HTMLElement||e instanceof oe(e).HTMLElement}function le(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof oe(e).ShadowRoot)}function ue(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ge(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function fe(e){return["table","td","th"].includes(re(e))}function de(e){const t=pe(),n=ge(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function pe(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function he(e){return["html","body","#document"].includes(re(e))}function ge(e){return oe(e).getComputedStyle(e)}function ve(e){return ae(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function me(e){if("html"===re(e))return e;const t=e.assignedSlot||e.parentNode||le(e)&&e.host||ie(e);return le(t)?t.host:t}function ye(e){const t=me(e);return he(t)?e.ownerDocument?e.ownerDocument.body:e.body:ce(t)&&ue(t)?t:ye(t)}function be(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=ye(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),s=oe(o);return i?t.concat(s,s.visualViewport||[],ue(o)?o:[],s.frameElement&&n?be(s.frameElement):[]):t.concat(o,be(o,[],n))}const we=Math.min,xe=Math.max,_e=Math.round,Oe=Math.floor,ke=e=>({x:e,y:e}),je={left:"right",right:"left",bottom:"top",top:"bottom"},Pe={start:"end",end:"start"};function Ee(e,t,n){return xe(e,we(t,n))}function Se(e,t){return"function"==typeof e?e(t):e}function Re(e){return e.split("-")[0]}function Ce(e){return e.split("-")[1]}function Ae(e){return"x"===e?"y":"x"}function Le(e){return"y"===e?"height":"width"}function Me(e){return["top","bottom"].includes(Re(e))?"y":"x"}function Te(e){return Ae(Me(e))}function Ne(e){return e.replace(/start|end/g,(e=>Pe[e]))}function De(e){return e.replace(/left|right|bottom|top/g,(e=>je[e]))}function Fe(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Be(e,t,n){let{reference:r,floating:o}=e;const i=Me(t),s=Te(t),a=Le(s),c=Re(t),l="y"===i,u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,d=r[a]/2-o[a]/2;let p;switch(c){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-o.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Ce(t)){case"start":p[s]-=d*(n&&l?-1:1);break;case"end":p[s]+=d*(n&&l?-1:1)}return p}async function qe(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:p=0}=Se(t,e),h=function(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(p),g=a[d?"floating"===f?"reference":"floating":f],v=Fe(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(g)))||n?g:g.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),m="floating"===f?{...s.floating,x:r,y:o}:s.reference,y=await(null==i.getOffsetParent?void 0:i.getOffsetParent(a.floating)),b=await(null==i.isElement?void 0:i.isElement(y))&&await(null==i.getScale?void 0:i.getScale(y))||{x:1,y:1},w=Fe(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:y,strategy:c}):m);return{top:(v.top-w.top+h.top)/b.y,bottom:(w.bottom-v.bottom+h.bottom)/b.y,left:(v.left-w.left+h.left)/b.x,right:(w.right-v.right+h.right)/b.x}}const ze=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=t,c=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),s=Re(n),a=Ce(n),c="y"===Me(n),l=["left","top"].includes(s)?-1:1,u=i&&c?-1:1,f=Se(t,e);let{mainAxis:d,crossAxis:p,alignmentAxis:h}="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&"number"==typeof h&&(p="end"===a?-1*h:h),c?{x:p*u,y:d*l}:{x:d*l,y:p*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:o+c.x,y:i+c.y,data:{...c,placement:s}}}}};function Ve(e){const t=ge(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=ce(e),i=o?e.offsetWidth:n,s=o?e.offsetHeight:r,a=_e(n)!==i||_e(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function We(e){return ae(e)?e:e.contextElement}function Ie(e){const t=We(e);if(!ce(t))return ke(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=Ve(t);let s=(i?_e(n.width):n.width)/r,a=(i?_e(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const He=ke(0);function Ze(e){const t=oe(e);return pe()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:He}function Ke(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=We(e);let s=ke(1);t&&(r?ae(r)&&(s=Ie(r)):s=Ie(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==oe(e))&&t}(i,n,r)?Ze(i):ke(0);let c=(o.left+a.x)/s.x,l=(o.top+a.y)/s.y,u=o.width/s.x,f=o.height/s.y;if(i){const e=oe(i),t=r&&ae(r)?oe(r):r;let n=e,o=n.frameElement;for(;o&&r&&t!==n;){const e=Ie(o),t=o.getBoundingClientRect(),r=ge(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,l*=e.y,u*=e.x,f*=e.y,c+=i,l+=s,n=oe(o),o=n.frameElement}}return Fe({width:u,height:f,x:c,y:l})}const $e=[":popover-open",":modal"];function Je(e){return $e.some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function Xe(e){return Ke(ie(e)).left+ve(e).scrollLeft}function Ue(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=oe(e),r=ie(e),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,c=0;if(o){i=o.width,s=o.height;const e=pe();(!e||e&&"fixed"===t)&&(a=o.offsetLeft,c=o.offsetTop)}return{width:i,height:s,x:a,y:c}}(e,n);else if("document"===t)r=function(e){const t=ie(e),n=ve(e),r=e.ownerDocument.body,o=xe(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=xe(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Xe(e);const a=-n.scrollTop;return"rtl"===ge(r).direction&&(s+=xe(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}(ie(e));else if(ae(t))r=function(e,t){const n=Ke(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=ce(e)?Ie(e):ke(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=Ze(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return Fe(r)}function Ye(e,t){const n=me(e);return!(n===t||!ae(n)||he(n))&&("fixed"===ge(n).position||Ye(n,t))}function Ge(e,t,n){const r=ce(t),o=ie(t),i="fixed"===n,s=Ke(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const c=ke(0);if(r||!r&&!i)if(("body"!==re(t)||ue(o))&&(a=ve(t)),r){const e=Ke(t,!0,i,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else o&&(c.x=Xe(o));return{x:s.left+a.scrollLeft-c.x,y:s.top+a.scrollTop-c.y,width:s.width,height:s.height}}function Qe(e,t){return ce(e)&&"fixed"!==ge(e).position?t?t(e):e.offsetParent:null}function et(e,t){const n=oe(e);if(!ce(e)||Je(e))return n;let r=Qe(e,t);for(;r&&fe(r)&&"static"===ge(r).position;)r=Qe(r,t);return r&&("html"===re(r)||"body"===re(r)&&"static"===ge(r).position&&!de(r))?n:r||function(e){let t=me(e);for(;ce(t)&&!he(t);){if(de(t))return t;t=me(t)}return null}(e)||n}const tt={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,s=ie(r),a=!!t&&Je(t.floating);if(r===s||a&&i)return n;let c={scrollLeft:0,scrollTop:0},l=ke(1);const u=ke(0),f=ce(r);if((f||!f&&!i)&&(("body"!==re(r)||ue(s))&&(c=ve(r)),ce(r))){const e=Ke(r);l=Ie(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}},getDocumentElement:ie,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[..."clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=be(e,[],!1).filter((e=>ae(e)&&"body"!==re(e))),o=null;const i="fixed"===ge(e).position;let s=i?me(e):e;for(;ae(s)&&!he(s);){const t=ge(s),n=de(s);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||ue(s)&&!n&&Ye(e,s))?r=r.filter((e=>e!==s)):o=t,s=me(s)}return t.set(e,r),r}(t,this._c):[].concat(n),r],s=i[0],a=i.reduce(((e,n)=>{const r=Ue(t,n,o);return e.top=xe(r.top,e.top),e.right=we(r.right,e.right),e.bottom=we(r.bottom,e.bottom),e.left=xe(r.left,e.left),e}),Ue(t,s,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:et,getElementRects:async function(e){const t=this.getOffsetParent||et,n=this.getDimensions;return{reference:Ge(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Ve(e);return{width:t,height:n}},getScale:Ie,isElement:ae,isRTL:function(e){return"rtl"===ge(e).direction}};function nt(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,l=We(e),u=o||i?[...l?be(l):[],...be(t)]:[];u.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const f=l&&a?function(e,t){let n,r=null;const o=ie(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(a,c){void 0===a&&(a=!1),void 0===c&&(c=1),i();const{left:l,top:u,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const p={rootMargin:-Oe(u)+"px "+-Oe(o.clientWidth-(l+f))+"px "+-Oe(o.clientHeight-(u+d))+"px "+-Oe(l)+"px",threshold:xe(0,we(1,c))||1};let h=!0;function g(e){const t=e[0].intersectionRatio;if(t!==c){if(!h)return s();t?s(!1,t):n=setTimeout((()=>{s(!1,1e-7)}),100)}h=!1}try{r=new IntersectionObserver(g,{...p,root:o.ownerDocument})}catch(e){r=new IntersectionObserver(g,p)}r.observe(e)}(!0),i}(l,n):null;let d,p=-1,h=null;s&&(h=new ResizeObserver((e=>{let[r]=e;r&&r.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=h)||e.observe(t)}))),n()})),l&&!c&&h.observe(l),h.observe(t));let g=c?Ke(e):null;return c&&function t(){const r=Ke(e);!g||r.x===g.x&&r.y===g.y&&r.width===g.width&&r.height===g.height||n();g=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==f||f(),null==(e=h)||e.disconnect(),h=null,c&&cancelAnimationFrame(d)}}const rt=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=Se(e,t),l={x:n,y:r},u=await qe(t,c),f=Me(Re(o)),d=Ae(f);let p=l[d],h=l[f];if(i){const e="y"===d?"bottom":"right";p=Ee(p+u["y"===d?"top":"left"],p,p-u[e])}if(s){const e="y"===f?"bottom":"right";h=Ee(h+u["y"===f?"top":"left"],h,h-u[e])}const g=a.fn({...t,[d]:p,[f]:h});return{...g,data:{x:g.x-n,y:g.y-r}}}}},ot=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...v}=Se(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const m=Re(o),y=Re(a)===a,b=await(null==c.isRTL?void 0:c.isRTL(l.floating)),w=d||(y||!g?[De(a)]:function(e){const t=De(e);return[Ne(e),t,Ne(t)]}(a));d||"none"===h||w.push(...function(e,t,n,r){const o=Ce(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:s;default:return[]}}(Re(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(Ne)))),i}(a,g,h,b));const x=[a,...w],_=await qe(t,v),O=[];let k=(null==(r=i.flip)?void 0:r.overflows)||[];if(u&&O.push(_[m]),f){const e=function(e,t,n){void 0===n&&(n=!1);const r=Ce(e),o=Te(e),i=Le(o);let s="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=De(s)),[s,De(s)]}(o,s,b);O.push(_[e[0]],_[e[1]])}if(k=[...k,{placement:o,overflows:O}],!O.every((e=>e<=0))){var j,P;const e=((null==(j=i.flip)?void 0:j.index)||0)+1,t=x[e];if(t)return{data:{index:e,overflows:k},reset:{placement:t}};let n=null==(P=k.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:P.placement;if(!n)switch(p){case"bestFit":{var E;const e=null==(E=k.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:E[0];e&&(n=e);break}case"initialPlacement":n=a}if(o!==n)return{reset:{placement:n}}}return{}}}},it=(e,t,n)=>{const r=new Map,o={platform:tt,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),c=await(null==s.isRTL?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=Be(l,r,c),d=r,p={},h=0;for(let n=0;n<a.length;n++){const{name:i,fn:g}=a[n],{x:v,y:m,data:y,reset:b}=await g({x:u,y:f,initialPlacement:r,placement:d,strategy:o,middlewareData:p,rects:l,platform:s,elements:{reference:e,floating:t}});u=null!=v?v:u,f=null!=m?m:f,p={...p,[i]:{...p[i],...y}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(d=b.placement),b.rects&&(l=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:o}):b.rects),({x:u,y:f}=Be(l,d,c))),n=-1)}return{x:u,y:f,placement:d,strategy:o,middlewareData:p}})(e,t,{...o,platform:i})};var st="undefined"!=typeof document?i:s;function at(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!at(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){const n=o[r];if(("_owner"!==n||!e.$$typeof)&&!at(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function ct(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function lt(e,t){const n=ct(e);return Math.round(t*n)/n}function ut(e){const t=n.useRef(e);return st((()=>{t.current=e})),t}const ft=n["useInsertionEffect".toString()]||(e=>e());var dt="undefined"!=typeof document?i:s;let pt=!1,ht=0;const gt=()=>"floating-ui-"+ht++;const vt=n["useId".toString()]||function(){const[e,t]=n.useState((()=>pt?gt():void 0));return dt((()=>{null==e&&t(gt())}),[]),n.useEffect((()=>{pt||(pt=!0)}),[]),e};const mt=n.createContext(null),yt=n.createContext(null);function bt(e){const t=a(e);return dt((()=>{t.current=e})),t}function wt(e){var t;void 0===e&&(e={});const{open:r=!1,onOpenChange:o,nodeId:i}=e,[s,a]=n.useState(null),c=(null==(t=e.elements)?void 0:t.reference)||s,u=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:o=[],platform:i,elements:{reference:s,floating:a}={},transform:c=!0,whileElementsMounted:u,open:f}=e,[d,p]=n.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,g]=n.useState(o);at(h,o)||g(o);const[v,m]=n.useState(null),[y,b]=n.useState(null),w=n.useCallback((e=>{e!==k.current&&(k.current=e,m(e))}),[]),x=n.useCallback((e=>{e!==j.current&&(j.current=e,b(e))}),[]),_=s||v,O=a||y,k=n.useRef(null),j=n.useRef(null),P=n.useRef(d),E=null!=u,S=ut(u),R=ut(i),C=n.useCallback((()=>{if(!k.current||!j.current)return;const e={placement:t,strategy:r,middleware:h};R.current&&(e.platform=R.current),it(k.current,j.current,e).then((e=>{const t={...e,isPositioned:!0};A.current&&!at(P.current,t)&&(P.current=t,l.flushSync((()=>{p(t)})))}))}),[h,t,r,R]);st((()=>{!1===f&&P.current.isPositioned&&(P.current.isPositioned=!1,p((e=>({...e,isPositioned:!1}))))}),[f]);const A=n.useRef(!1);st((()=>(A.current=!0,()=>{A.current=!1})),[]),st((()=>{if(_&&(k.current=_),O&&(j.current=O),_&&O){if(S.current)return S.current(_,O,C);C()}}),[_,O,C,S,E]);const L=n.useMemo((()=>({reference:k,floating:j,setReference:w,setFloating:x})),[w,x]),M=n.useMemo((()=>({reference:_,floating:O})),[_,O]),T=n.useMemo((()=>{const e={position:r,left:0,top:0};if(!M.floating)return e;const t=lt(M.floating,d.x),n=lt(M.floating,d.y);return c?{...e,transform:"translate("+t+"px, "+n+"px)",...ct(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}}),[r,c,M.floating,d.x,d.y]);return n.useMemo((()=>({...d,update:C,refs:L,elements:M,floatingStyles:T})),[d,C,L,M,T])}(e),f=n.useContext(yt),d=null!=((null==(p=n.useContext(mt))?void 0:p.id)||null);var p;const h=function(e){const t=n.useRef((()=>{}));return ft((()=>{t.current=e})),n.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}(((e,t,n)=>{e&&(v.current.openEvent=t),m.emit("openchange",{open:e,event:t,reason:n,nested:d}),null==o||o(e,t,n)})),g=n.useRef(null),v=n.useRef({}),m=n.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}()))[0],y=vt(),b=n.useCallback((e=>{const t=ae(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;u.refs.setReference(t)}),[u.refs]),w=n.useCallback((e=>{(ae(e)||null===e)&&(g.current=e,a(e)),(ae(u.refs.reference.current)||null===u.refs.reference.current||null!==e&&!ae(e))&&u.refs.setReference(e)}),[u.refs]),x=n.useMemo((()=>({...u.refs,setReference:w,setPositionReference:b,domReference:g})),[u.refs,w,b]),_=n.useMemo((()=>({...u.elements,domReference:c})),[u.elements,c]),O=n.useMemo((()=>({...u,refs:x,elements:_,dataRef:v,nodeId:i,floatingId:y,events:m,open:r,onOpenChange:h})),[u,i,y,m,r,h,x,_]);return dt((()=>{const e=null==f?void 0:f.nodesRef.current.find((e=>e.id===i));e&&(e.context=O)})),n.useMemo((()=>({...u,context:O,refs:x,elements:_})),[u,x,_,O])}const xt=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function _t(e,t){return"function"==typeof e?e(t):e}function Ot(e,t){void 0===t&&(t={});const{open:r,elements:{floating:o}}=e,{duration:i=250}=t,s=("number"==typeof i?i:i.close)||0,[a,c]=n.useState(!1),[l,u]=n.useState("unmounted"),f=function(e,t){const[r,o]=n.useState(e);return e&&!r&&o(!0),n.useEffect((()=>{if(!e){const e=setTimeout((()=>o(!1)),t);return()=>clearTimeout(e)}}),[e,t]),r}(r,s);return dt((()=>{a&&!f&&u("unmounted")}),[a,f]),dt((()=>{if(o){if(r){u("initial");const e=requestAnimationFrame((()=>{u("open")}));return()=>{cancelAnimationFrame(e)}}c(!0),u("close")}}),[r,o]),{isMounted:f,status:l}}
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function kt(e){return"[object Object]"===Object.prototype.toString.call(e)}function jt(e){var t,n;return!1!==kt(e)&&(void 0===(t=e.constructor)||!1!==kt(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}var Pt=Symbol.for("immer-nothing"),Et=Symbol.for("immer-draftable"),St=Symbol.for("immer-state");function Rt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ct=Object.getPrototypeOf;function At(e){return!!e&&!!e[St]}function Lt(e){return!!e&&(Tt(e)||Array.isArray(e)||!!e[Et]||!!e.constructor?.[Et]||qt(e)||zt(e))}var Mt=Object.prototype.constructor.toString();function Tt(e){if(!e||"object"!=typeof e)return!1;const t=Ct(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Mt}function Nt(e,t){0===Dt(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function Dt(e){const t=e[St];return t?t.type_:Array.isArray(e)?1:qt(e)?2:zt(e)?3:0}function Ft(e,t){return 2===Dt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Bt(e,t,n){const r=Dt(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function qt(e){return e instanceof Map}function zt(e){return e instanceof Set}function Vt(e){return e.copy_||e.base_}function Wt(e,t){if(qt(e))return new Map(e);if(zt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Tt(e)){if(!Ct(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[St];let r=Reflect.ownKeys(n);for(let t=0;t<r.length;t++){const o=r[t],i=n[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Ct(e),n)}function It(e,t=!1){return Zt(e)||At(e)||!Lt(e)||(Dt(e)>1&&(e.set=e.add=e.clear=e.delete=Ht),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>It(t,!0)))),e}function Ht(){Rt(2)}function Zt(e){return Object.isFrozen(e)}var Kt,$t={};function Jt(e){const t=$t[e];return t||Rt(0),t}function Xt(){return Kt}function Ut(e,t){t&&(Jt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Yt(e){Gt(e),e.drafts_.forEach(en),e.drafts_=null}function Gt(e){e===Kt&&(Kt=e.parent_)}function Qt(e){return Kt={drafts_:[],parent_:Kt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function en(e){const t=e[St];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function tn(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[St].modified_&&(Yt(t),Rt(4)),Lt(e)&&(e=nn(t,e),t.parent_||on(t,e)),t.patches_&&Jt("Patches").generateReplacementPatches_(n[St].base_,e,t.patches_,t.inversePatches_)):e=nn(t,n,[]),Yt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Pt?e:void 0}function nn(e,t,n){if(Zt(t))return t;const r=t[St];if(!r)return Nt(t,((o,i)=>rn(e,r,t,o,i,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return on(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let o=t,i=!1;3===r.type_&&(o=new Set(t),t.clear(),i=!0),Nt(o,((o,s)=>rn(e,r,t,o,s,n,i))),on(e,t,!1),n&&e.patches_&&Jt("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function rn(e,t,n,r,o,i,s){if(At(o)){const s=nn(e,o,i&&t&&3!==t.type_&&!Ft(t.assigned_,r)?i.concat(r):void 0);if(Bt(n,r,s),!At(s))return;e.canAutoFreeze_=!1}else s&&n.add(o);if(Lt(o)&&!Zt(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;nn(e,o),t&&t.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||on(e,o)}}function on(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&It(t,n)}var sn={get(e,t){if(t===St)return e;const n=Vt(e);if(!Ft(n,t))return function(e,t,n){const r=ln(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Lt(r)?r:r===cn(e.base_,t)?(fn(e),e.copy_[t]=dn(r,e)):r},has:(e,t)=>t in Vt(e),ownKeys:e=>Reflect.ownKeys(Vt(e)),set(e,t,n){const r=ln(Vt(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=cn(Vt(e),t),s=r?.[St];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((o=n)===(i=r)?0!==o||1/o==1/i:o!=o&&i!=i)&&(void 0!==n||Ft(e.base_,t)))return!0;fn(e),un(e)}var o,i;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==cn(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,fn(e),un(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Vt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Rt(11)},getPrototypeOf:e=>Ct(e.base_),setPrototypeOf(){Rt(12)}},an={};function cn(e,t){const n=e[St];return(n?Vt(n):e)[t]}function ln(e,t){if(!(t in e))return;let n=Ct(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Ct(n)}}function un(e){e.modified_||(e.modified_=!0,e.parent_&&un(e.parent_))}function fn(e){e.copy_||(e.copy_=Wt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Nt(sn,((e,t)=>{an[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),an.deleteProperty=function(e,t){return an.set.call(this,e,t,void 0)},an.set=function(e,t,n){return sn.set.call(this,e[0],t,n,e[0])};function dn(e,t){const n=qt(e)?Jt("MapSet").proxyMap_(e,t):zt(e)?Jt("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Xt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=sn;n&&(o=[r],i=an);const{revoke:s,proxy:a}=Proxy.revocable(o,i);return r.draft_=a,r.revoke_=s,a}(e,t);return(t?t.scope_:Xt()).drafts_.push(n),n}function pn(e){if(!Lt(e)||Zt(e))return e;const t=e[St];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Wt(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Wt(e,!0);return Nt(n,((e,t)=>{Bt(n,e,pn(t))})),t&&(t.finalized_=!1),n}var hn=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...o){return r.produce(e,(e=>t.call(this,e,...o)))}}let r;if("function"!=typeof t&&Rt(6),void 0!==n&&"function"!=typeof n&&Rt(7),Lt(e)){const o=Qt(this),i=dn(e,void 0);let s=!0;try{r=t(i),s=!1}finally{s?Yt(o):Gt(o)}return Ut(o,n),tn(r,o)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===Pt&&(r=void 0),this.autoFreeze_&&It(r,!0),n){const t=[],o=[];Jt("Patches").generateReplacementPatches_(e,r,t,o),n(t,o)}return r}Rt(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;return[this.produce(e,t,((e,t)=>{n=e,r=t})),n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Lt(e)||Rt(8),At(e)&&(e=function(e){At(e)||Rt(10);return pn(e)}(e));const t=Qt(this),n=dn(e,void 0);return n[St].isManual_=!0,Gt(t),n}finishDraft(e,t){const n=e&&e[St];n&&n.isManual_||Rt(9);const{scope_:r}=n;return Ut(r,t),tn(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Jt("Patches").applyPatches_;return At(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},gn=hn.produce;hn.produceWithPatches.bind(hn),hn.setAutoFreeze.bind(hn),hn.setUseStrictShallowCopy.bind(hn),hn.applyPatches.bind(hn);var vn=hn.createDraft.bind(hn),mn=hn.finishDraft.bind(hn),yn={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,r=yn.levels(e,t);return r=n?r.slice(1):r.slice(0,-1)},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var o=e[r];if(o!==t[r])break;n.push(o)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),i=e[n],s=t[n];return yn.equals(r,o)&&i>s},endsAt(e,t){var n=e.length,r=e.slice(0,n),o=t.slice(0,n);return yn.equals(r,o)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),o=t.slice(0,n),i=e[n],s=t[n];return yn.equals(r,o)&&i<s},equals:(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n])),hasPrevious:e=>e[e.length-1]>0,isAfter:(e,t)=>1===yn.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===yn.compare(e,t),isBefore:(e,t)=>-1===yn.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===yn.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===yn.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===yn.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===yn.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&yn.equals(n,r)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,r=[],o=0;o<=e.length;o++)r.push(e.slice(0,o));return n&&r.reverse(),r},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!yn.isAncestor(t,e)&&!yn.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:o="forward"}=n;if(0===e.length)return r;switch(t.type){case"insert_node":var{path:i}=t;(yn.equals(i,r)||yn.endsBefore(i,r)||yn.isAncestor(i,r))&&(r[i.length-1]+=1);break;case"remove_node":var{path:s}=t;if(yn.equals(s,r)||yn.isAncestor(s,r))return null;yn.endsBefore(s,r)&&(r[s.length-1]-=1);break;case"merge_node":var{path:a,position:c}=t;yn.equals(a,r)||yn.endsBefore(a,r)?r[a.length-1]-=1:yn.isAncestor(a,r)&&(r[a.length-1]-=1,r[a.length]+=c);break;case"split_node":var{path:l,position:u}=t;if(yn.equals(l,r)){if("forward"===o)r[r.length-1]+=1;else if("backward"!==o)return null}else yn.endsBefore(l,r)?r[l.length-1]+=1:yn.isAncestor(l,r)&&e[l.length]>=u&&(r[l.length-1]+=1,r[l.length]-=u);break;case"move_node":var{path:f,newPath:d}=t;if(yn.equals(f,d))return r;if(yn.isAncestor(f,r)||yn.equals(f,r)){var p=d.slice();return yn.endsBefore(f,d)&&f.length<d.length&&(p[f.length-1]-=1),p.concat(r.slice(f.length))}yn.isSibling(f,d)&&(yn.isAncestor(d,r)||yn.equals(d,r))?yn.endsBefore(f,r)?r[f.length-1]-=1:r[f.length-1]+=1:yn.endsBefore(d,r)||yn.equals(d,r)||yn.isAncestor(d,r)?(yn.endsBefore(f,r)&&(r[f.length-1]-=1),r[d.length-1]+=1):yn.endsBefore(f,r)&&(yn.equals(d,r)&&(r[d.length-1]+=1),r[f.length-1]-=1)}return r}};function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}function wn(e){var t=function(e,t){if("object"!==bn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===bn(t)?t:String(t)}function xn(e,t,n){return(t=wn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kn={transform(e,t){e.children=vn(e.children);var n=e.selection&&vn(e.selection);try{n=((e,t,n)=>{switch(n.type){case"insert_node":var{path:r,node:o}=n,i=Fn.parent(e,r),s=r[r.length-1];if(s>i.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(i.children.splice(s,0,o),t)for(var[a,c]of An.points(t))t[c]=Zn.transform(a,n);break;case"insert_text":var{path:l,offset:u,text:f}=n;if(0===f.length)break;var d=Fn.leaf(e,l),p=d.text.slice(0,u),h=d.text.slice(u);if(d.text=p+f+h,t)for(var[g,v]of An.points(t))t[v]=Zn.transform(g,n);break;case"merge_node":var{path:m}=n,y=Fn.get(e,m),b=yn.previous(m),w=Fn.get(e,b),x=Fn.parent(e,m),_=m[m.length-1];if(Qn.isText(y)&&Qn.isText(w))w.text+=y.text;else{if(Qn.isText(y)||Qn.isText(w))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(m,"] to nodes of different interfaces: ").concat($n.stringify(y)," ").concat($n.stringify(w)));w.children.push(...y.children)}if(x.children.splice(_,1),t)for(var[O,k]of An.points(t))t[k]=Zn.transform(O,n);break;case"move_node":var{path:j,newPath:P}=n;if(yn.isAncestor(j,P))throw new Error("Cannot move a path [".concat(j,"] to new path [").concat(P,"] because the destination is inside itself."));var E=Fn.get(e,j),S=Fn.parent(e,j),R=j[j.length-1];S.children.splice(R,1);var C=yn.transform(j,n),A=Fn.get(e,yn.parent(C)),L=C[C.length-1];if(A.children.splice(L,0,E),t)for(var[M,T]of An.points(t))t[T]=Zn.transform(M,n);break;case"remove_node":var{path:N}=n,D=N[N.length-1];if(Fn.parent(e,N).children.splice(D,1),t)for(var[F,B]of An.points(t)){var q=Zn.transform(F,n);if(null!=t&&null!=q)t[B]=q;else{var z=void 0,V=void 0;for(var[W,I]of Fn.texts(e)){if(-1!==yn.compare(I,N)){V=[W,I];break}z=[W,I]}var H=!1;z&&V&&(H=yn.equals(V[1],N)?!yn.hasPrevious(V[1]):yn.common(z[1],N).length<yn.common(V[1],N).length),z&&!H?(F.path=z[1],F.offset=z[0].text.length):V?(F.path=V[1],F.offset=0):t=null}}break;case"remove_text":var{path:Z,offset:K,text:$}=n;if(0===$.length)break;var J=Fn.leaf(e,Z),X=J.text.slice(0,K),U=J.text.slice(K+$.length);if(J.text=X+U,t)for(var[Y,G]of An.points(t))t[G]=Zn.transform(Y,n);break;case"set_node":var{path:Q,properties:ee,newProperties:te}=n;if(0===Q.length)throw new Error("Cannot set properties on the root node!");var ne=Fn.get(e,Q);for(var re in te){if("children"===re||"text"===re)throw new Error('Cannot set the "'.concat(re,'" property of nodes!'));var oe=te[re];null==oe?delete ne[re]:ne[re]=oe}for(var ie in ee)te.hasOwnProperty(ie)||delete ne[ie];break;case"set_selection":var{newProperties:se}=n;if(null==se)t=se;else{if(null==t){if(!An.isRange(se))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat($n.stringify(se)," when there is no current selection."));t=On({},se)}for(var ae in se){var ce=se[ae];if(null==ce){if("anchor"===ae||"focus"===ae)throw new Error('Cannot remove the "'.concat(ae,'" selection property'));delete t[ae]}else t[ae]=ce}}break;case"split_node":var{path:le,position:ue,properties:fe}=n;if(0===le.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(le,"] because the root node cannot be split."));var de,pe=Fn.get(e,le),he=Fn.parent(e,le),ge=le[le.length-1];if(Qn.isText(pe)){var ve=pe.text.slice(0,ue),me=pe.text.slice(ue);pe.text=ve,de=On(On({},fe),{},{text:me})}else{var ye=pe.children.slice(0,ue),be=pe.children.slice(ue);pe.children=ye,de=On(On({},fe),{},{children:be})}if(he.children.splice(ge+1,0,de),t)for(var[we,xe]of An.points(t))t[xe]=Zn.transform(we,n)}return t})(e,n,t)}finally{e.children=mn(e.children),e.selection=n?At(n)?mn(n):n:null}}},jn={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},Pn={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},En=(e,t)=>{for(var n in e){var r=e[n],o=t[n];if(jt(r)&&jt(o)){if(!En(r,o))return!1}else if(Array.isArray(r)&&Array.isArray(o)){if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++)if(r[i]!==o[i])return!1}else if(r!==o)return!1}for(var s in t)if(void 0===e[s]&&void 0!==t[s])return!1;return!0};function Sn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Rn=["anchor","focus"];function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var An={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:o}=e;return An.isBackward(e)===n?[r,o]:[o,r]},end(e){var[,t]=An.edges(e);return t},equals:(e,t)=>Zn.equals(e.anchor,t.anchor)&&Zn.equals(e.focus,t.focus),includes(e,t){if(An.isRange(t)){if(An.includes(e,t.anchor)||An.includes(e,t.focus))return!0;var[n,r]=An.edges(e),[o,i]=An.edges(t);return Zn.isBefore(n,o)&&Zn.isAfter(r,i)}var[s,a]=An.edges(e),c=!1,l=!1;return Zn.isPoint(t)?(c=Zn.compare(t,s)>=0,l=Zn.compare(t,a)<=0):(c=yn.compare(t,s.path)>=0,l=yn.compare(t,a.path)<=0),c&&l},intersection(e,t){var n=Sn(e,Rn),[r,o]=An.edges(e),[i,s]=An.edges(t),a=Zn.isBefore(r,i)?i:r,c=Zn.isBefore(o,s)?o:s;return Zn.isBefore(c,a)?null:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(n),!0).forEach((function(t){xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({anchor:a,focus:c},n)},isBackward(e){var{anchor:t,focus:n}=e;return Zn.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return Zn.equals(t,n)},isExpanded:e=>!An.isCollapsed(e),isForward:e=>!An.isBackward(e),isRange:e=>jt(e)&&Zn.isPoint(e.anchor)&&Zn.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=An.edges(e);return t},transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return gn(e,(e=>{if(null===e)return null;var r,o,{affinity:i="inward"}=n;if("inward"===i){var s=An.isCollapsed(e);An.isForward(e)?(r="forward",o=s?r:"backward"):(r="backward",o=s?r:"forward")}else"outward"===i?An.isForward(e)?(r="backward",o="forward"):(r="forward",o="backward"):(r=i,o=i);var a=Zn.transform(e.anchor,t,{affinity:r}),c=Zn.transform(e.focus,t,{affinity:o});if(!a||!c)return null;e.anchor=a,e.focus=c}))}},Ln=e=>jt(e)&&Fn.isNodeList(e.children)&&!Wn.isEditor(e),Mn={isAncestor:e=>jt(e)&&Fn.isNodeList(e.children),isElement:Ln,isElementList:e=>Array.isArray(e)&&e.every((e=>Mn.isElement(e))),isElementProps:e=>void 0!==e.children,isElementType:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return Ln(e)&&e[n]===t},matches(e,t){for(var n in t)if("children"!==n&&e[n]!==t[n])return!1;return!0}},Tn=["children"],Nn=["text"],Dn=new WeakMap,Fn={ancestor(e,t){var n=Fn.get(e,t);if(Qn.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat($n.stringify(n)));return n},ancestors(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var r of yn.ancestors(t,n)){var o=[Fn.ancestor(e,r),r];yield o}}()},child(e,t){if(Qn.isText(e))throw new Error("Cannot get the child of a text node: ".concat($n.stringify(e)));var n=e.children[t];if(null==n)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat($n.stringify(e)));return n},children(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,o=Fn.ancestor(e,t),{children:i}=o,s=r?i.length-1:0;r?s>=0:s<i.length;){var a=Fn.child(o,s),c=t.concat(s);yield[a,c],s=r?s-1:s+1}}()},common(e,t,n){var r=yn.common(t,n);return[Fn.get(e,r),r]},descendant(e,t){var n=Fn.get(e,t);if(Wn.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat($n.stringify(n)));return n},descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of Fn.nodes(e,t))0!==r.length&&(yield[n,r])}()},elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of Fn.nodes(e,t))Mn.isElement(n)&&(yield[n,r])}()},extractProps:e=>Mn.isAncestor(e)?Sn(e,Tn):Sn(e,Nn),first(e,t){for(var n=t.slice(),r=Fn.get(e,n);r&&!Qn.isText(r)&&0!==r.children.length;)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(Qn.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat($n.stringify(e)));var n=gn({children:e.children},(e=>{var[n,r]=An.edges(t),o=Fn.nodes(e,{reverse:!0,pass:e=>{var[,n]=e;return!An.includes(t,n)}});for(var[,i]of o){if(!An.includes(t,i)){var s=Fn.parent(e,i),a=i[i.length-1];s.children.splice(a,1)}if(yn.equals(i,r.path)){var c=Fn.leaf(e,i);c.text=c.text.slice(0,r.offset)}if(yn.equals(i,n.path)){var l=Fn.leaf(e,i);l.text=l.text.slice(n.offset)}}Wn.isEditor(e)&&(e.selection=null)}));return n.children},get(e,t){for(var n=e,r=0;r<t.length;r++){var o=t[r];if(Qn.isText(n)||!n.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat($n.stringify(e)));n=n.children[o]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var o=t[r];if(Qn.isText(n)||!n.children[o])return!1;n=n.children[o]}return!0},isNode:e=>Qn.isText(e)||Mn.isElement(e)||Wn.isEditor(e),isNodeList(e){if(!Array.isArray(e))return!1;var t=Dn.get(e);if(void 0!==t)return t;var n=e.every((e=>Fn.isNode(e)));return Dn.set(e,n),n},last(e,t){for(var n=t.slice(),r=Fn.get(e,n);r&&!Qn.isText(r)&&0!==r.children.length;){var o=r.children.length-1;r=r.children[o],n.push(o)}return[r,n]},leaf(e,t){var n=Fn.get(e,t);if(!Qn.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat($n.stringify(n)));return n},levels(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){for(var r of yn.levels(t,n)){var o=Fn.get(e,r);yield[o,r]}}()},matches:(e,t)=>Mn.isElement(e)&&Mn.isElementProps(t)&&Mn.matches(e,t)||Qn.isText(e)&&Qn.isTextProps(t)&&Qn.matches(e,t),nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=t,{from:o=[],to:i}=t,s=new Set,a=[],c=e;!i||!(r?yn.isBefore(a,i):yn.isAfter(a,i));)if(s.has(c)||(yield[c,a]),s.has(c)||Qn.isText(c)||0===c.children.length||null!=n&&!1!==n([c,a])){if(0===a.length)break;if(!r){var l=yn.next(a);if(Fn.has(e,l)){a=l,c=Fn.get(e,a);continue}}if(r&&0!==a[a.length-1])a=yn.previous(a),c=Fn.get(e,a);else a=yn.parent(a),c=Fn.get(e,a),s.add(c)}else{s.add(c);var u=r?c.children.length-1:0;yn.isAncestor(a,o)&&(u=o[a.length]),a=a.concat(u),c=Fn.get(e,a)}}()},parent(e,t){var n=yn.parent(t),r=Fn.get(e,n);if(Qn.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string:e=>Qn.isText(e)?e.text:e.children.map(Fn.string).join(""),texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){for(var[n,r]of Fn.nodes(e,t))Qn.isText(n)&&(yield[n,r])}()}};function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(n),!0).forEach((function(t){xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zn={isNodeOperation:e=>zn.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!jt(e))return!1;switch(e.type){case"insert_node":case"remove_node":return yn.isPath(e.path)&&Fn.isNode(e.node);case"insert_text":case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&yn.isPath(e.path);case"merge_node":return"number"==typeof e.position&&yn.isPath(e.path)&&jt(e.properties);case"move_node":return yn.isPath(e.path)&&yn.isPath(e.newPath);case"set_node":return yn.isPath(e.path)&&jt(e.properties)&&jt(e.newProperties);case"set_selection":return null===e.properties&&An.isRange(e.newProperties)||null===e.newProperties&&An.isRange(e.properties)||jt(e.properties)&&jt(e.newProperties);case"split_node":return yn.isPath(e.path)&&"number"==typeof e.position&&jt(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&e.every((e=>zn.isOperation(e))),isSelectionOperation:e=>zn.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>zn.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return qn(qn({},e),{},{type:"remove_node"});case"insert_text":return qn(qn({},e),{},{type:"remove_text"});case"merge_node":return qn(qn({},e),{},{type:"split_node",path:yn.previous(e.path)});case"move_node":var{newPath:t,path:n}=e;if(yn.equals(t,n))return e;if(yn.isSibling(n,t))return qn(qn({},e),{},{path:t,newPath:n});var r=yn.transform(n,e),o=yn.transform(yn.next(n),e);return qn(qn({},e),{},{path:r,newPath:o});case"remove_node":return qn(qn({},e),{},{type:"insert_node"});case"remove_text":return qn(qn({},e),{},{type:"insert_text"});case"set_node":var{properties:i,newProperties:s}=e;return qn(qn({},e),{},{properties:s,newProperties:i});case"set_selection":var{properties:a,newProperties:c}=e;return qn(qn({},e),{},null==a?{properties:c,newProperties:null}:null==c?{properties:null,newProperties:a}:{properties:c,newProperties:a});case"split_node":return qn(qn({},e),{},{type:"merge_node",path:yn.next(e.path)})}}},Vn=new WeakMap,Wn={above:(e,t)=>e.above(t),addMark(e,t,n){e.addMark(t,n)},after:(e,t,n)=>e.after(t,n),before:(e,t,n)=>e.before(t,n),deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges:(e,t)=>e.edges(t),elementReadOnly(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.elementReadOnly(t)},end:(e,t)=>e.end(t),first:(e,t)=>e.first(t),fragment:(e,t)=>e.fragment(t),hasBlocks:(e,t)=>e.hasBlocks(t),hasInlines:(e,t)=>e.hasInlines(t),hasPath:(e,t)=>e.hasPath(t),hasTexts:(e,t)=>e.hasTexts(t),insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>e.isBlock(t),isEdge:(e,t,n)=>e.isEdge(t,n),isEditor:e=>(e=>{var t=Vn.get(e);if(void 0!==t)return t;if(!jt(e))return!1;var n="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertSoftBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isElementReadOnly&&"function"==typeof e.isInline&&"function"==typeof e.isSelectable&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&"function"==typeof e.getDirtyPaths&&(null===e.marks||jt(e.marks))&&(null===e.selection||An.isRange(e.selection))&&Fn.isNodeList(e.children)&&zn.isOperationList(e.operations);return Vn.set(e,n),n})(e),isElementReadOnly:(e,t)=>e.isElementReadOnly(t),isEmpty:(e,t)=>e.isEmpty(t),isEnd:(e,t,n)=>e.isEnd(t,n),isInline:(e,t)=>e.isInline(t),isNormalizing:e=>e.isNormalizing(),isSelectable:(e,t)=>e.isSelectable(t),isStart:(e,t,n)=>e.isStart(t,n),isVoid:(e,t)=>e.isVoid(t),last:(e,t)=>e.last(t),leaf:(e,t,n)=>e.leaf(t,n),levels:(e,t)=>e.levels(t),marks:e=>e.getMarks(),next:(e,t)=>e.next(t),node:(e,t,n)=>e.node(t,n),nodes:(e,t)=>e.nodes(t),normalize(e,t){e.normalize(t)},parent:(e,t,n)=>e.parent(t,n),path:(e,t,n)=>e.path(t,n),pathRef:(e,t,n)=>e.pathRef(t,n),pathRefs:e=>e.pathRefs(),point:(e,t,n)=>e.point(t,n),pointRef:(e,t,n)=>e.pointRef(t,n),pointRefs:e=>e.pointRefs(),positions:(e,t)=>e.positions(t),previous:(e,t)=>e.previous(t),range:(e,t,n)=>e.range(t,n),rangeRef:(e,t,n)=>e.rangeRef(t,n),rangeRefs:e=>e.rangeRefs(),removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start:(e,t)=>e.start(t),string:(e,t,n)=>e.string(t,n),unhangRange:(e,t,n)=>e.unhangRange(t,n),void:(e,t)=>e.void(t),withoutNormalizing(e,t){e.withoutNormalizing(t)}};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zn={compare(e,t){var n=yn.compare(e.path,t.path);return 0===n?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter:(e,t)=>1===Zn.compare(e,t),isBefore:(e,t)=>-1===Zn.compare(e,t),equals:(e,t)=>e.offset===t.offset&&yn.equals(e.path,t.path),isPoint:e=>jt(e)&&"number"==typeof e.offset&&yn.isPath(e.path),transform(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return gn(e,(e=>{if(null===e)return null;var{affinity:r="forward"}=n,{path:o,offset:i}=e;switch(t.type){case"insert_node":case"move_node":e.path=yn.transform(o,t,n);break;case"insert_text":yn.equals(t.path,o)&&(t.offset<i||t.offset===i&&"forward"===r)&&(e.offset+=t.text.length);break;case"merge_node":yn.equals(t.path,o)&&(e.offset+=t.position),e.path=yn.transform(o,t,n);break;case"remove_text":yn.equals(t.path,o)&&t.offset<=i&&(e.offset-=Math.min(i-t.offset,t.text.length));break;case"remove_node":if(yn.equals(t.path,o)||yn.isAncestor(t.path,o))return null;e.path=yn.transform(o,t,n);break;case"split_node":if(yn.equals(t.path,o)){if(t.position===i&&null==r)return null;(t.position<i||t.position===i&&"forward"===r)&&(e.offset-=t.position,e.path=yn.transform(o,t,Hn(Hn({},n),{},{affinity:"forward"})))}else e.path=yn.transform(o,t,n)}}))}},Kn=void 0,$n={setScrubber(e){Kn=e},stringify:e=>JSON.stringify(e,Kn)},Jn=["text"],Xn=["anchor","focus"];function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gn,Qn={equals(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:r=!1}=n;function o(e){return Sn(e,Jn)}return En(r?o(e):e,r?o(t):t)},isText:e=>jt(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&e.every((e=>Qn.isText(e))),isTextProps:e=>void 0!==e.text,matches(e,t){for(var n in t)if("text"!==n&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[Yn({},e)];for(var r of t){var o=Sn(r,Xn),[i,s]=An.edges(r),a=[],c=0,l=i.offset,u=s.offset;for(var f of n){var{length:d}=f.text,p=c;if(c+=d,l<=p&&c<=u)Object.assign(f,o),a.push(f);else if(l!==u&&(l===c||u===p)||l>c||u<p||u===p&&0!==p)a.push(f);else{var h=f,g=void 0,v=void 0;if(u<c){var m=u-p;v=Yn(Yn({},h),{},{text:h.text.slice(m)}),h=Yn(Yn({},h),{},{text:h.text.slice(0,m)})}if(l>p){var y=l-p;g=Yn(Yn({},h),{},{text:h.text.slice(0,y)}),h=Yn(Yn({},h),{},{text:h.text.slice(y)})}Object.assign(h,o),g&&a.push(g),a.push(h),v&&a.push(v)}}n=a}return n}},er=e=>e.selection?e.selection:e.children.length>0?Wn.end(e,[]):[0];!function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"}(Gn||(Gn={})),Gn.L,Gn.L,Gn.V,Gn.LV,Gn.LVT,Gn.LV,Gn.V,Gn.V,Gn.T,Gn.LVT,Gn.T,Gn.T,Gn.Any,Gn.Extend,Gn.ZWJ,Gn.Any,Gn.SpacingMark,Gn.Prepend,Gn.Any,Gn.ZWJ,Gn.ExtPict,Gn.RI,Gn.RI;var tr={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Wn.withoutNormalizing(e,(()=>{var{voids:r=!1}=n,{at:o=er(e)}=n;if(yn.isPath(o)&&(o=Wn.range(e,o)),An.isRange(o))if(An.isCollapsed(o))o=o.anchor;else{var i=An.end(o);if(!r&&Wn.void(e,{at:i}))return;var s=An.start(o),a=Wn.pointRef(e,s),c=Wn.pointRef(e,i);or.delete(e,{at:o,voids:r});var l=a.unref(),u=c.unref();o=l||u,or.setSelection(e,{anchor:o,focus:o})}if(!(!r&&Wn.void(e,{at:o})||Wn.elementReadOnly(e,{at:o}))){var{path:f,offset:d}=o;t.length>0&&e.apply({type:"insert_text",path:f,offset:d,text:t})}}))}};function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var or=rr(rr(rr(rr({},kn),jn),Pn),tr);function ir(e,t){return t.map((t=>{var n,r,o,i,s,a;if("string"==typeof t){return{type:t,title:(null===(r=null===(n=e.blocks[t].options)||void 0===n?void 0:n.display)||void 0===r?void 0:r.title)||t,description:null===(i=null===(o=e.blocks[t].options)||void 0===o?void 0:o.display)||void 0===i?void 0:i.description,icon:null===(a=null===(s=e.blocks[t].options)||void 0===s?void 0:s.display)||void 0===a?void 0:a.icon}}return t}))}function sr({editor:e,onClose:t,onMouseEnter:n=(()=>{}),empty:r=!1,mode:o="toggle",view:i="default",selectedAction:s}){return{actions:(()=>{let t=Object.keys(e.blocks);return"toggle"===o&&(t=t.filter((t=>function(e,t){var n;const r=e.blocks[t];if(!r)return!1;const o=u(r.elements);return"void"!==(null===(n=null==o?void 0:o.props)||void 0===n?void 0:n.nodeType)}(e,t)))),ir(e,t)})(),onClose:t,empty:r,getItemProps:r=>({onMouseEnter:n,"data-action-menu-item":!0,"data-action-menu-item-type":r,"aria-selected":r===(null==s?void 0:s.type),onClick:()=>{e.toggleBlock(r,{deleteText:"create"===o,focus:!0}),t()}}),getRootProps:()=>({"data-action-menu-list":!0}),editor:e,view:i}}const{Portal:ar}=p,cr=(e,t,n)=>{if(!e||void 0===e[n])return!1;const r=e[n],o=t.toLowerCase().trim();return Array.isArray(r)?r.filter(Boolean).map((e=>String(e).toLowerCase())).some((e=>e.includes(o))):String(r).toLowerCase().includes(o)};const lr=({items:t,render:r})=>{const o=f(),[i,a]=c(!1),{refs:l,floatingStyles:u,update:p,context:v}=wt({placement:"bottom-start",open:i,onOpenChange:a,middleware:[ot(),rt(),ze(10)],whileElementsMounted:nt}),{isMounted:m,styles:y}=function(e,t){void 0===t&&(t={});const{initial:r={opacity:0},open:o,close:i,common:s,duration:a=250}=t,c=e.placement,l=c.split("-")[0],u=n.useMemo((()=>({side:l,placement:c})),[l,c]),f="number"==typeof a,d=(f?a:a.open)||0,p=(f?a:a.close)||0,[h,g]=n.useState((()=>({..._t(s,u),..._t(r,u)}))),{isMounted:v,status:m}=Ot(e,{duration:a}),y=bt(r),b=bt(o),w=bt(i),x=bt(s);return dt((()=>{const e=_t(y.current,u),t=_t(w.current,u),n=_t(x.current,u),r=_t(b.current,u)||Object.keys(e).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===m&&g((t=>({transitionProperty:t.transitionProperty,...n,...e}))),"open"===m&&g({transitionProperty:Object.keys(r).map(xt).join(","),transitionDuration:d+"ms",...n,...r}),"close"===m){const r=t||e;g({transitionProperty:Object.keys(r).map(xt).join(","),transitionDuration:p+"ms",...n,...r})}}),[p,w,y,b,x,d,m,u]),{isMounted:v,styles:h}}(v,{duration:100}),b=ir(o,t||Object.keys(o.blocks)),[w,x]=c(b[0]),[_,O]=c(b),k=()=>a(!1),j=({text:e})=>{const t=e.trim().replace("/","");if(!t)return void O(b);const n=b.filter((e=>((e,t)=>!t.trim()||!!e&&t.toLowerCase().split(/\s+/).every((t=>{var n,r,o;return!!cr(e,t,"type")||(!(!(null===(n=e.options)||void 0===n?void 0:n.display)||!cr(e.options.display,t,"title"))||(!(!e.options||!cr(e.options,t,"shortcuts"))||(!(!(null===(r=e.options)||void 0===r?void 0:r.display)||!cr(e.options.display,t,"description"))||!(!(null===(o=e.options)||void 0===o?void 0:o.aliases)||!cr(e.options,t,"aliases")))))})))(o.blocks[e.type],t)));if(n.length>0){n.some((e=>e.type===(null==w?void 0:w.type)))||x(n[0])}O(n)};s((()=>{var e;p();const t=e=>{var t;const n=h.getBlockSlate(o,{at:o.path.current}),r=null===(t=o.refElement)||void 0===t?void 0:t.contains(e.target);if(!n||!n.selection||!r)return;const s=yn.parent(n.selection.anchor.path),a=Wn.string(n,s);if(0===a.length||!i)return k();j({text:a})},n=e=>{if(e.isComposing)return;const t=h.getBlockSlate(o,{at:o.path.current}),n=e.currentTarget,r=null==n?void 0:n.contains(e.target),s=document.querySelector("[data-custom-editor]");if((null==s?void 0:s.contains(e.target))||!t||!t.selection||!r)return;const c=function(e){return"/"===e.key||191===e.keyCode||191===e.which||"Slash"===e.code||"/"===e.key||"."===e.key&&e.shiftKey}(e);if(c||g.isSlashCommand(e)){if(!(t.selection&&!Wn.isEditor(t.selection.anchor.path[0])))return;const e=yn.parent(t.selection.anchor.path),n=Wn.string(t,e);if(!Wn.isStart(t,t.selection.anchor,t.selection.focus)||n.trim().length>0)return;const r=window.getSelection();if(!r)return;const o=r.getRangeAt(0),i=o.getBoundingClientRect();o&&(l.setReference({getBoundingClientRect:()=>i,getClientRects:()=>o.getClientRects()}),a(!0))}if(i)if(g.isTab(e))e.preventDefault();else{if(g.isArrowUp(e)){e.preventDefault();if(!(w||_[0]))return;const t=document.querySelector("[data-action-menu-list]"),n=null==t?void 0:t.querySelectorAll("[data-action-menu-item]");if(!n)return;const r=null==t?void 0:t.querySelector('[aria-selected="true"]'),o=n[Array.from(n||[]).indexOf(r)-1];if(!o){const e=n[n.length-1],t=e.getAttribute("data-action-menu-item-type");e.scrollIntoView({block:"nearest"});const r=_.find((e=>e.type===t));return x(r)}o.scrollIntoView({block:"nearest"});const i=o.getAttribute("data-action-menu-item-type"),s=_.find((e=>e.type===i));return x(s)}if(g.isArrowDown(e)){e.preventDefault();if(!(w||_[0]))return;const t=document.querySelector("[data-action-menu-list]"),n=null==t?void 0:t.querySelectorAll("[data-action-menu-item]");if(!n)return;const r=null==t?void 0:t.querySelector('[aria-selected="true"]'),o=n[Array.from(n||[]).indexOf(r)+1];if(!o){const e=n[0],t=e.getAttribute("data-action-menu-item-type");e.scrollIntoView({block:"nearest"});const r=_.find((e=>e.type===t));return x(r)}o.scrollIntoView({block:"nearest"});const i=o.getAttribute("data-action-menu-item-type"),s=_.find((e=>e.type===i));return x(s)}if(g.isArrowLeft(e))e.preventDefault();else if(g.isArrowRight(e))e.preventDefault();else{if(g.isBackspace(e)){if(!t.selection)return;if(Wn.isStart(t,t.selection.anchor,t.selection.focus))return k()}if(g.isEscape(e))return e.preventDefault(),void k();if(g.isEnter(e)){e.preventDefault();const n=document.querySelector("[data-action-menu-item][aria-selected=true]"),r=null==n?void 0:n.dataset.actionMenuItemType;if(!r)return;const i=Wn.above(t,{match:e=>Mn.isElement(e)&&Wn.isBlock(t,e),mode:"lowest"});if(i){const[,e]=i,n=i?e:[],r=Wn.start(t,n),o={anchor:t.selection.anchor,focus:r};or.select(t,o),or.delete(t)}return o.toggleBlock(r,{deleteText:!0,focus:!0}),k()}}}};if(i&&document.addEventListener("click",k),"number"==typeof o.path.current){const r=d(o,{at:o.path.current});if(!r)return;const i=null===(e=o.refElement)||void 0===e?void 0:e.querySelector(`[data-yoopta-block-id="${r.id}"] [data-slate-editor="true"]`);if(!i)return;return i.addEventListener("keydown",n),i.addEventListener("keyup",t),()=>{i.removeEventListener("keydown",n),i.removeEventListener("keyup",t),document.removeEventListener("click",k)}}}),[_,i,o.path]);const P=0===_.length,E=sr({empty:P,editor:o,onClose:k,onMouseEnter:e=>{const t=e.currentTarget.getAttribute("data-action-menu-item-type"),n=b.find((e=>e.type===t));x(n)},selectedAction:w,view:"default",mode:"create"});s((()=>{let e=setTimeout((()=>{P&&k()}),3e3);return()=>clearTimeout(e)}),[_.length,i]);const S=Object.assign(Object.assign({},u),y);return e(ar,r?Object.assign({id:"list-portal"},{children:m&&e("div",Object.assign({className:"yoopta-action-menu-list",style:S,ref:l.setFloating},{children:r(Object.assign(Object.assign({},E),{actions:_}))}))}):Object.assign({id:"list-portal"},{children:m&&e("div",Object.assign({className:"yoopta-action-menu-list",style:S,ref:l.setFloating},{children:e(ne,Object.assign({},E,{actions:_}))}))}))};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".mb-0{margin-bottom:0}.mb-0\\.5{margin-bottom:.125rem}.\\!block{display:block!important}.block{display:block}.flex{display:flex}.h-\\[40px\\]{height:40px}.max-h-\\[300px\\]{max-height:300px}.w-\\[40px\\]{width:40px}.w-full{width:100%}.max-w-\\[200px\\]{max-width:200px}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.items-center{align-items:center}.justify-center{justify-content:center}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.truncate{overflow:hidden;white-space:nowrap}.text-ellipsis,.truncate{text-overflow:ellipsis}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-solid{border-style:solid}.border-\\[\\#e5e7eb\\]{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity))}.bg-\\[\\#FFFFFF\\]{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-0{padding:0}.px-1{padding-left:.25rem;padding-right:.25rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.text-left{text-align:left}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-medium{font-weight:500}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.yoopta-action-menu-list{bottom:auto;left:0;margin:0;position:absolute;right:auto;top:0;z-index:9999}.yoopta-action-menu-list-content{--tw-border-opacity:1;--tw-bg-opacity:1;--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);background-color:rgb(255 255 255/var(--tw-bg-opacity));border-color:rgb(229 231 235/var(--tw-border-opacity));border-radius:.375rem;border-style:solid;border-width:1px;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);height:auto;max-height:330px;overflow-y:auto;padding:.5rem .25rem;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);width:18rem;z-index:50}.last\\:mb-0:last-child{margin-bottom:0}.hover\\:bg-\\[\\#f4f4f5\\]:hover{--tw-bg-opacity:1;background-color:rgb(244 244 245/var(--tw-bg-opacity))}.aria-selected\\:bg-\\[\\#f0f0f0\\][aria-selected=true]{--tw-bg-opacity:1;background-color:rgb(240 240 240/var(--tw-bg-opacity))}");export{ne as DefaultActionMenuRender,sr as buildActionMenuRenderProps,lr as default};
